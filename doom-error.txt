[testuser@nixos:/etc/nixos]$ sudo nixos-rebuild switch --flake .#nixos-vm
[sudo] password for testuser: 
building the system configuration...
error:
       … while calling the 'head' builtin
         at /nix/store/hr5pl7m833kkr0zv98iydy7mxyl10qld-source/lib/attrsets.nix:1571:13:
         1570|           if length values == 1 || pred here (elemAt values 1) (head values) then
         1571|             head values
             |             ^
         1572|           else

       … while evaluating the attribute 'value'
         at /nix/store/hr5pl7m833kkr0zv98iydy7mxyl10qld-source/lib/modules.nix:1083:7:
         1082|     // {
         1083|       value = addErrorContext "while evaluating the option `${showOption loc}':" value;
             |       ^
         1084|       inherit (res.defsFinal') highestPrio;

       … while evaluating the option `system.build.toplevel':

       … while evaluating definitions from `/nix/store/hr5pl7m833kkr0zv98iydy7mxyl10qld-source/nixos/modules/system/activation/top-level.nix':

       … while evaluating the option `home-manager.users.testuser.home.file':

       … while evaluating definitions from `/nix/store/a4la088hi5id7sw77gy9zdvwn83dgczz-source/modules/programs/vscode.nix':

       … while evaluating the option `home-manager.users.testuser.programs.vscode.profiles.default.extensions':

       … while evaluating definitions from `/nix/store/737wh5p8m3wih9wwzybijj4mypmrvbs6-source/home/modules/dev/vscode.nix':

       (stack trace truncated; use '--show-trace' to show the full, detailed trace)

       error: undefined variable 'ntbbloodbath'
       at /nix/store/737wh5p8m3wih9wwzybijj4mypmrvbs6-source/home/modules/dev/vscode.nix:48:9:
           47|         #Theme
           48|         ntbbloodbath.doom-one
             |         ^
           49|       ];

[testuser@nixos:/etc/nixos]$ 